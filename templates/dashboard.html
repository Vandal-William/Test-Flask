{% include "layout/databaseNav.html" %}
            <main class="main-database">
                <h1 class="main-database-title">Dashboard comptable</h1>
                <!-- 
                <p class="main-database-request"></p>
                <p class="main-database-response"></p> 
                -->

                <p class="main-database-request"><span class="groupes">Groupe: 3</span> Calculer le panier moyen des ventes</p>
                <p class="main-database-response">SELECT ticket.price_id, COUNT(ticket.price_id) AS nombre_tickets, price.price, price.price * COUNT(ticket.price_id) AS prix_total,
                    SUM(price.price * COUNT(ticket.price_id)) OVER () AS chiffre_affaire, ( SELECT COUNT(*) FROM spectateur ) AS max_spectateur ,
                    (SUM(price.price * COUNT(ticket.price_id)) OVER () / ( SELECT COUNT(*) FROM spectateur ) ) AS panier_moyen
                    
                FROM ticket 
                LEFT JOIN price ON ticket.price_id = price.id 
                GROUP BY ticket.price_id, price.price;
                </p> 

                <p class="main-database-request"> <span class="groupes">Groupe: 4</span> Lister les concerts en indiquant le nombre de places vendues.</p>
                <p class="main-database-response">SELECT ticket.concert_id, COUNT(ticket.concert_id) AS places_vendues
                    FROM ticket 
                    LEFT JOIN concert ON ticket.concert_id = concert.id 
                    GROUP BY ticket.concert_id, concert.id ;
                    </p> 

                <p class="main-database-request"><span class="groupes">Groupe: 4</span> Lister le total des ventes pour chaque journée de festival (en se basant sur startTime)</p>
                <p class="main-database-response">SELECT DATE(event.start_time) AS date, SUM(price.price) AS total_journalier
                    FROM ticket 
                    LEFT JOIN price ON ticket.price_id = price.id 
                    LEFT JOIN concert ON ticket.concert_id = concert.id
                    LEFT JOIN event ON concert.id = event.id
                    GROUP BY DATE(event.start_time)
                    ORDER BY DATE(event.start_time);</p>
                
                <p class="main-database-request"><span class="groupes">Groupe: 4</span> Lister la moyenne du montant des ventes pour chaque concert</p>
                <p class="main-database-response">request</p>

                <p class="main-database-request"><span class="groupes">Groupe: 6</span> Lister les gens qui ont dépensé plus que la moyenne du panier d’achat</p>
                <p class="main-database-response">resquest</p> 

            </main>
        </div>
    </body>
</html>